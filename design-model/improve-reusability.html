<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>提高复用性 | 鳕鱼笔记本</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="description" content="记录日常学习">
    
    <link rel="preload" href="/assets/css/0.styles.f7b20a5d.css" as="style"><link rel="preload" href="/assets/js/app.f7a18c16.js" as="script"><link rel="preload" href="/assets/js/2.6f02a440.js" as="script"><link rel="preload" href="/assets/js/27.8fa84858.js" as="script"><link rel="prefetch" href="/assets/js/10.765b4553.js"><link rel="prefetch" href="/assets/js/11.7f004ba0.js"><link rel="prefetch" href="/assets/js/12.ba9e404b.js"><link rel="prefetch" href="/assets/js/13.c5039e23.js"><link rel="prefetch" href="/assets/js/14.4c2c41d1.js"><link rel="prefetch" href="/assets/js/15.cc3505d7.js"><link rel="prefetch" href="/assets/js/16.889414cc.js"><link rel="prefetch" href="/assets/js/17.a200ea5a.js"><link rel="prefetch" href="/assets/js/18.05e6f62e.js"><link rel="prefetch" href="/assets/js/19.85012dd9.js"><link rel="prefetch" href="/assets/js/20.de932d50.js"><link rel="prefetch" href="/assets/js/21.ac6fb982.js"><link rel="prefetch" href="/assets/js/22.6304fbdc.js"><link rel="prefetch" href="/assets/js/23.e29b671f.js"><link rel="prefetch" href="/assets/js/24.087222c0.js"><link rel="prefetch" href="/assets/js/25.d2d6c635.js"><link rel="prefetch" href="/assets/js/26.f5603d65.js"><link rel="prefetch" href="/assets/js/28.c820643f.js"><link rel="prefetch" href="/assets/js/29.69a8b0b7.js"><link rel="prefetch" href="/assets/js/3.eef5ab69.js"><link rel="prefetch" href="/assets/js/30.658d3449.js"><link rel="prefetch" href="/assets/js/31.0ff1036e.js"><link rel="prefetch" href="/assets/js/4.1d52f60c.js"><link rel="prefetch" href="/assets/js/5.8b64aaec.js"><link rel="prefetch" href="/assets/js/6.59c1ad67.js"><link rel="prefetch" href="/assets/js/7.9bf67e3e.js"><link rel="prefetch" href="/assets/js/8.6148114a.js"><link rel="prefetch" href="/assets/js/9.f450c6df.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f7b20a5d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">鳕鱼笔记本</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/xueyu-book" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/xueyu-book" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/daily-qa" class="sidebar-heading clickable"><span>每日一题</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/base-js" class="sidebar-heading clickable"><span>js基础</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/design-model" class="sidebar-heading clickable router-link-active open"><span>设计模式</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-model/preface.html" class="sidebar-link">前言</a></li><li><a href="/design-model/encapsulation-objects.html" class="sidebar-link">封装与对象</a></li><li><a href="/design-model/improve-reusability.html" aria-current="page" class="active sidebar-link">提高复用性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-model/improve-reusability.html#提高复用性的目的" class="sidebar-link">提高复用性的目的</a></li><li class="sidebar-sub-header"><a href="/design-model/improve-reusability.html#什么是好的复用" class="sidebar-link">什么是好的复用</a></li><li class="sidebar-sub-header"><a href="/design-model/improve-reusability.html#减少代码数量-高效复用代码的设计模式" class="sidebar-link">减少代码数量，高效复用代码的设计模式</a></li><li class="sidebar-sub-header"><a href="/design-model/improve-reusability.html#基本结构示例" class="sidebar-link">基本结构示例</a></li><li class="sidebar-sub-header"><a href="/design-model/improve-reusability.html#javascript的组合与继承" class="sidebar-link">JavaScript的组合与继承</a></li><li class="sidebar-sub-header"><a href="/design-model/improve-reusability.html#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/design-model/improve-code-quality.html" class="sidebar-link">提高代码质量</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/computer-network" class="sidebar-heading clickable"><span>计算机网络</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/useful-knowledge" class="sidebar-heading clickable"><span>有用的知识点</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/advanced-math" class="sidebar-heading clickable"><span>高等数学</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="提高复用性"><a href="#提高复用性" class="header-anchor">#</a> 提高复用性</h1> <h2 id="提高复用性的目的"><a href="#提高复用性的目的" class="header-anchor">#</a> 提高复用性的目的</h2> <ul><li>遵循DRY原则（Don't Repeat Yourself）</li> <li>减少代码量，节省开销</li></ul> <h2 id="什么是好的复用"><a href="#什么是好的复用" class="header-anchor">#</a> 什么是好的复用</h2> <ul><li>对象可以重复使用，不用修改</li> <li>重复代码少</li> <li>模块功能单一（低耦合）</li></ul> <h2 id="减少代码数量-高效复用代码的设计模式"><a href="#减少代码数量-高效复用代码的设计模式" class="header-anchor">#</a> 减少代码数量，高效复用代码的设计模式</h2> <ul><li>桥接模式
<ul><li>目的：通过桥接代替耦合。</li> <li>应用场景：减少模块之间的耦合。</li></ul></li> <li>享元模式
<ul><li>目的：减少对象/代码数量。</li> <li>应用场景：当代码中创建了大量类似的对象和类似的代码块。</li> <li>要点：保留公用的代码逻辑，将需要改变的代码抽取成公共享元，通过参数来控制。</li></ul></li> <li>模板方法模式
<ul><li>目的：定义一系列操作的骨架，简化后面类似操作的内容。</li> <li>应用场景：当项目中出现很多类似操作内容。</li></ul></li></ul> <h2 id="基本结构示例"><a href="#基本结构示例" class="header-anchor">#</a> 基本结构示例</h2> <h3 id="享元模式的基本结构"><a href="#享元模式的基本结构" class="header-anchor">#</a> 享元模式的基本结构</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 有一百种不同文字的弹窗，每种弹窗行为相同，但是文字和样式不同，</span>
  <span class="token comment">// 只需要一个类，不需要new100次弹窗。</span>
  <span class="token comment">// 这个类只保留所有弹窗共有的，每个弹窗不同的部分留作一个公共享元。</span>

  <span class="token keyword">function</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 保留相同的部分</span>
  pop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">action</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 显示弹窗</span>
  pop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> text <span class="token operator">=</span> config<span class="token punctuation">.</span>text <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> color <span class="token operator">=</span> config<span class="token punctuation">.</span>text <span class="token operator">||</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 提取出每个弹窗不同的部分作为一个外部数组。</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      text<span class="token operator">:</span> <span class="token string">'文本1'</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      text<span class="token operator">:</span> <span class="token string">'文本2'</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> popup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    popup<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="桥接模式的基本结构"><a href="#桥接模式的基本结构" class="header-anchor">#</a> 桥接模式的基本结构</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 有3种形状，每种形状都有3种颜色</span>
  <span class="token comment">// 对于这个需求，可以将颜色实现逻辑单独实现</span>
  <span class="token keyword">function</span> <span class="token function">showColor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">rect</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">circle</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">delta</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">new</span> <span class="token class-name">circle</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="模板方法模式的基本结构"><a href="#模板方法模式的基本结构" class="header-anchor">#</a> 模板方法模式的基本结构</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 编写导航组件，功能和展示都可能各不相同。</span>
  <span class="token comment">// 导航组件多种多样，可能后面还会新增类型，因此可以先写一个基础的组件类，</span>
  <span class="token comment">// 具体的实现，延迟到具体的使用时再去实现。</span>
  <span class="token keyword">function</span> <span class="token function">baseNav</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 基础类，此处定下基本框架</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">isFunction</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object function]'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  baseNav<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">action</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 特异性的处理，留出一个回调等待具体实现</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 执行自有方法</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="享元模式的应用示例"><a href="#享元模式的应用示例" class="header-anchor">#</a> 享元模式的应用示例</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 需求：项目中有一个文件上传功能，该功能可以上传多个文件。</span>
  <span class="token comment">//文件上传</span>
  <span class="token comment">// function uploader(fileType,file){</span>
  <span class="token comment">//   this.fileType=fileType;</span>
  <span class="token comment">//     this.file=file;</span>
  <span class="token comment">// }</span>
  <span class="token comment">// uploader.prototype.init=function(){</span>
  <span class="token comment">//   //初始化文件上传的html</span>
  <span class="token comment">// }</span>
  <span class="token comment">// uploader.prototype.delete=function(){</span>
  <span class="token comment">//   //删除掉该html</span>
  <span class="token comment">// }</span>
  <span class="token comment">// uploader.prototype.uploading=function(){</span>
  <span class="token comment">//   //上传</span>
  <span class="token comment">// }</span>
  <span class="token comment">// var fileob1,fileob2;</span>
  <span class="token comment">// new uploader('img', fileob1);</span>
  <span class="token comment">// new uploader('txt', fileob2);</span>

  <span class="token comment">// 使用享元模式</span>
  <span class="token keyword">function</span> <span class="token function">uploader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  uploader<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//初始化文件上传的html</span>
  <span class="token punctuation">}</span>
  uploader<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">delete</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//删除掉该html</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 公共享元</span>
  uploader<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">uploading</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">filetype<span class="token punctuation">,</span>file</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 上传</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>
      file<span class="token operator">:</span> fileob1<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'txt'</span><span class="token punctuation">,</span>
      file<span class="token operator">:</span> fileob2<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>     
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> uploader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">uploader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    uploader<span class="token punctuation">.</span><span class="token function">uploading</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">,</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="桥接模式的示例"><a href="#桥接模式的示例" class="header-anchor">#</a> 桥接模式的示例</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 需求：创建不同的选中效果，有一组菜单，上面每种选项，都有不同的选中效果。</span>

  <span class="token keyword">function</span> <span class="token function">menuItem</span><span class="token punctuation">(</span><span class="token parameter">word<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>word <span class="token operator">=</span> word<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>word<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">menuColor</span><span class="token punctuation">(</span><span class="token parameter">colorover<span class="token punctuation">,</span> colorout</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>colorover <span class="token operator">=</span> colorover<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>colorout <span class="token operator">=</span> colorout<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  menuItem<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> self<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorover<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> self<span class="token punctuation">.</span>color<span class="token punctuation">.</span>colorout<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>  
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> data<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      word<span class="token operator">:</span> <span class="token string">'menu1'</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      word<span class="token operator">:</span> <span class="token string">'menu2'</span><span class="token punctuation">,</span>
      color<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token class-name">menuItem</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>word<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">menuColor</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 需求：Express中创建get等方法。express中有get、post等方法，如何方便快速的创建</span>

  <span class="token keyword">const</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token string">'post'</span><span class="token punctuation">,</span> <span class="token string">'delete'</span><span class="token punctuation">,</span> <span class="token string">'put'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  methods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">method</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      route<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// methods.forEach(function(method) {</span>
  <span class="token comment">//   Route.prototype[method] = function() {</span>
  <span class="token comment">//     var handles = flatten(slice.call(arguments));</span>

  <span class="token comment">//     for(let i = 0; i &lt; handles.length; i++) {</span>
  <span class="token comment">//       var handle = handles[i];</span>
  <span class="token comment">//       if (typeof handle !== 'function') {</span>
  <span class="token comment">//         var type = toString.call(handle);</span>
  <span class="token comment">//         var msg = `Route.${method}() requires a callback function but get a ${type}`;</span>
  <span class="token comment">//         throw new Error(msg);</span>
  <span class="token comment">//       }</span>

  <span class="token comment">//       debug('%s %o', method, this.paht);</span>
        
  <span class="token comment">//       var layer = Layer('/', {}, handle);</span>
  <span class="token comment">//       layer.method = method;</span>

  <span class="token comment">//       this.methods[method] = true;</span>
  <span class="token comment">//       this.stack.push(layer);</span>
  <span class="token comment">//     }</span>

  <span class="token comment">//     return this;</span>
  <span class="token comment">//   };</span>
  <span class="token comment">// });</span>
</code></pre></div><h3 id="模板方法模式的示例"><a href="#模板方法模式的示例" class="header-anchor">#</a> 模板方法模式的示例</h3> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 需求：项目有一系列弹窗，每个弹窗的行为、大小、文字都不同。</span>
  <span class="token comment">// 模板方式模式的继承实现思路</span>
  <span class="token keyword">function</span> <span class="token function">basePop</span><span class="token punctuation">(</span><span class="token parameter">word<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>word <span class="token operator">=</span> word<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dom <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  basePop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>word<span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dom <span class="token operator">=</span> div<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  basePop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">hidden</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  basePop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">confirm</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">ajaxPop</span><span class="token punctuation">(</span><span class="token parameter">word<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">basePop</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> word<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  ajaxPop<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">basePop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> hidden <span class="token operator">=</span> ajaxPop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hidden<span class="token punctuation">;</span>
  ajaxPop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">hidden</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">hidden</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> confirm <span class="token operator">=</span> ajaxPop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>confirm<span class="token punctuation">;</span>
  ajaxPop<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">confirm</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">confirm</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 需求：现在我们有一系列自己的算法，但是这个算法在不同的地方需要添加一些不同的操作。</span>
  <span class="token comment">// 模板方式模式的组合实现思路</span>

  <span class="token keyword">function</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>beforeCounter <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>afterCounter <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  counter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addBefore</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>beforeCounter<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  counter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addAfter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>afterCounter<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  counter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">count</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 基础操作</span>
    <span class="token keyword">function</span> <span class="token function">baseCount</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      num <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">;</span>
      num <span class="token operator">*=</span> <span class="token number">4</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> _resultNum <span class="token operator">=</span> num<span class="token punctuation">;</span>
    <span class="token keyword">var</span> _arr <span class="token operator">=</span> <span class="token punctuation">[</span>baseCount<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 构造完整的执行方法队列</span>
    _arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>beforeCounter<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>_arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    _arr <span class="token operator">=</span> _arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>afterCounter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">while</span><span class="token punctuation">(</span>_arr<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _resultNum <span class="token operator">=</span> _arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_resultNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _resultNum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 使用</span>
  <span class="token keyword">var</span> countObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  countObject<span class="token punctuation">.</span><span class="token function">addBefore</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    num<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  countObject<span class="token punctuation">.</span><span class="token function">addAfter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    num <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  countObject<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="javascript的组合与继承"><a href="#javascript的组合与继承" class="header-anchor">#</a> JavaScript的组合与继承</h2> <ul><li>组合
<ul><li>JavaScript最初没有专门的继承，所以最初JavaScript推崇函数式的编程，
然后进行统一组合桥接到一起。</li> <li>桥接模式可以看出组合的一种体现，组合的好处是耦合低，方便方法复用，方便扩展。</li></ul></li> <li>继承
<ul><li>在ES6出现class和extend，继承的方式多种多样，但是都是各有弊端。</li> <li>模板方法模式可以看出继承的一种体现，继承的好处是可以自动获得父类的内容与接口，
方便统一化</li></ul></li> <li>最佳实践
<ul><li>优先使用组合，其次才考虑继承。</li></ul></li></ul> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <ul><li>桥接模式
<ul><li>通过独立方法间的桥接来形成整体功能，这样每个方法都可以被高度复用。</li></ul></li> <li>享元模式
<ul><li>提取出公有部分与私有部分，私有部分作为外部数据传入。从而减少对象数量。</li></ul></li> <li>模板方法模式
<ul><li>当一个功能朝着多样化发展，不妨先定义一个基础的方法，把具体实现延迟到后面。</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design-model/encapsulation-objects.html" class="prev">
        封装与对象
      </a></span> <span class="next"><a href="/design-model/improve-code-quality.html">
        提高代码质量
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f7a18c16.js" defer></script><script src="/assets/js/2.6f02a440.js" defer></script><script src="/assets/js/27.8fa84858.js" defer></script>
  </body>
</html>
